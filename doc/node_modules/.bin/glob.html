<!DOCTYPE html>
<html>
<head>
  <title>glob</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/.bin/glob";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#sourcemappingurlbin.mjs.map">sourceMappingURL=bin.mjs.map</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>glob</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">#!/usr/bin/env node</span>
<span class="hljs-keyword">import</span> { foregroundChild } <span class="hljs-keyword">from</span> <span class="hljs-string">'foreground-child'</span>;
<span class="hljs-keyword">import</span> { existsSync } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;
<span class="hljs-keyword">import</span> { readFile } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>;
<span class="hljs-keyword">import</span> { jack } <span class="hljs-keyword">from</span> <span class="hljs-string">'jackspeak'</span>;
<span class="hljs-keyword">import</span> { join } <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;
<span class="hljs-keyword">import</span> { fileURLToPath } <span class="hljs-keyword">from</span> <span class="hljs-string">'url'</span>;
<span class="hljs-keyword">import</span> { globStream } <span class="hljs-keyword">from</span> <span class="hljs-string">'./index.js'</span>;
<span class="hljs-comment">/* c8 ignore start */</span>
<span class="hljs-keyword">const</span> { version } = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">await</span> readFile(fileURLToPath(<span class="hljs-keyword">new</span> URL(<span class="hljs-string">'../../package.json'</span>, <span class="hljs-keyword">import</span>.meta.url)), <span class="hljs-string">'utf8'</span>).catch(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> readFile(fileURLToPath(<span class="hljs-keyword">new</span> URL(<span class="hljs-string">'../../package.json'</span>, <span class="hljs-keyword">import</span>.meta.url)), <span class="hljs-string">'utf8'</span>)));
<span class="hljs-comment">/* c8 ignore stop */</span>
<span class="hljs-keyword">const</span> j = jack({
    <span class="hljs-attr">usage</span>: <span class="hljs-string">'glob [options] [&lt;pattern&gt; [&lt;pattern&gt; ...]]'</span>,
})
    .description(<span class="hljs-string">`
    Glob v<span class="hljs-subst">${version}</span>

    Expand the positional glob expression arguments into any matching file
    system paths found.
  `</span>)
    .opt({
    <span class="hljs-attr">cmd</span>: {
        <span class="hljs-attr">short</span>: <span class="hljs-string">'c'</span>,
        <span class="hljs-attr">hint</span>: <span class="hljs-string">'command'</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">`Run the command provided, passing the glob expression
                    matches as arguments.`</span>,
    },
})
    .opt({
    <span class="hljs-attr">default</span>: {
        <span class="hljs-attr">short</span>: <span class="hljs-string">'p'</span>,
        <span class="hljs-attr">hint</span>: <span class="hljs-string">'pattern'</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">`If no positional arguments are provided, glob will use
                    this pattern`</span>,
    },
})
    .flag({
    <span class="hljs-attr">all</span>: {
        <span class="hljs-attr">short</span>: <span class="hljs-string">'A'</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">`By default, the glob cli command will not expand any
                    arguments that are an exact match to a file on disk.

                    This prevents double-expanding, in case the shell expands
                    an argument whose filename is a glob expression.

                    For example, if 'app/*.ts' would match 'app/[id].ts', then
                    on Windows powershell or cmd.exe, 'glob app/*.ts' will
                    expand to 'app/[id].ts', as expected. However, in posix
                    shells such as bash or zsh, the shell will first expand
                    'app/*.ts' to a list of filenames. Then glob will look
                    for a file matching 'app/[id].ts' (ie, 'app/i.ts' or
                    'app/d.ts'), which is unexpected.

                    Setting '--all' prevents this behavior, causing glob
                    to treat ALL patterns as glob expressions to be expanded,
                    even if they are an exact match to a file on disk.

                    When setting this option, be sure to enquote arguments
                    so that the shell will not expand them prior to passing
                    them to the glob command process.
      `</span>,
    },
    <span class="hljs-attr">absolute</span>: {
        <span class="hljs-attr">short</span>: <span class="hljs-string">'a'</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">'Expand to absolute paths'</span>,
    },
    <span class="hljs-string">'dot-relative'</span>: {
        <span class="hljs-attr">short</span>: <span class="hljs-string">'d'</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">`Prepend './' on relative matches`</span>,
    },
    <span class="hljs-attr">mark</span>: {
        <span class="hljs-attr">short</span>: <span class="hljs-string">'m'</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">`Append a / on any directories matched`</span>,
    },
    <span class="hljs-attr">posix</span>: {
        <span class="hljs-attr">short</span>: <span class="hljs-string">'x'</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">`Always resolve to posix style paths, using '/' as the
                    directory separator, even on Windows. Drive letter
                    absolute matches on Windows will be expanded to their
                    full resolved UNC maths, eg instead of 'C:\\foo\\bar',
                    it will expand to '//?/C:/foo/bar'.
      `</span>,
    },
    <span class="hljs-attr">follow</span>: {
        <span class="hljs-attr">short</span>: <span class="hljs-string">'f'</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">`Follow symlinked directories when expanding '**'`</span>,
    },
    <span class="hljs-attr">realpath</span>: {
        <span class="hljs-attr">short</span>: <span class="hljs-string">'R'</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">`Call 'fs.realpath' on all of the results. In the case
                    of an entry that cannot be resolved, the entry is
                    omitted. This incurs a slight performance penalty, of
                    course, because of the added system calls.`</span>,
    },
    <span class="hljs-attr">stat</span>: {
        <span class="hljs-attr">short</span>: <span class="hljs-string">'s'</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">`Call 'fs.lstat' on all entries, whether required or not
                    to determine if it's a valid match.`</span>,
    },
    <span class="hljs-string">'match-base'</span>: {
        <span class="hljs-attr">short</span>: <span class="hljs-string">'b'</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">`Perform a basename-only match if the pattern does not
                    contain any slash characters. That is, '*.js' would be
                    treated as equivalent to '**/*.js', matching js files
                    in all directories.
      `</span>,
    },
    <span class="hljs-attr">dot</span>: {
        <span class="hljs-attr">description</span>: <span class="hljs-string">`Allow patterns to match files/directories that start
                    with '.', even if the pattern does not start with '.'
      `</span>,
    },
    <span class="hljs-attr">nobrace</span>: {
        <span class="hljs-attr">description</span>: <span class="hljs-string">'Do not expand {...} patterns'</span>,
    },
    <span class="hljs-attr">nocase</span>: {
        <span class="hljs-attr">description</span>: <span class="hljs-string">`Perform a case-insensitive match. This defaults to
                    'true' on macOS and Windows platforms, and false on
                    all others.

                    Note: 'nocase' should only be explicitly set when it is
                    known that the filesystem's case sensitivity differs
                    from the platform default. If set 'true' on
                    case-insensitive file systems, then the walk may return
                    more or less results than expected.
      `</span>,
    },
    <span class="hljs-attr">nodir</span>: {
        <span class="hljs-attr">description</span>: <span class="hljs-string">`Do not match directories, only files.

                    Note: to *only* match directories, append a '/' at the
                    end of the pattern.
      `</span>,
    },
    <span class="hljs-attr">noext</span>: {
        <span class="hljs-attr">description</span>: <span class="hljs-string">`Do not expand extglob patterns, such as '+(a|b)'`</span>,
    },
    <span class="hljs-attr">noglobstar</span>: {
        <span class="hljs-attr">description</span>: <span class="hljs-string">`Do not expand '**' against multiple path portions.
                    Ie, treat it as a normal '*' instead.`</span>,
    },
    <span class="hljs-string">'windows-path-no-escape'</span>: {
        <span class="hljs-attr">description</span>: <span class="hljs-string">`Use '\\' as a path separator *only*, and *never* as an
                    escape character. If set, all '\\' characters are
                    replaced with '/' in the pattern.`</span>,
    },
})
    .num({
    <span class="hljs-string">'max-depth'</span>: {
        <span class="hljs-attr">short</span>: <span class="hljs-string">'D'</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">`Maximum depth to traverse from the current
                    working directory`</span>,
    },
})
    .opt({
    <span class="hljs-attr">cwd</span>: {
        <span class="hljs-attr">short</span>: <span class="hljs-string">'C'</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">'Current working directory to execute/match in'</span>,
        <span class="hljs-attr">default</span>: process.cwd(),
    },
    <span class="hljs-attr">root</span>: {
        <span class="hljs-attr">short</span>: <span class="hljs-string">'r'</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">`A string path resolved against the 'cwd', which is
                    used as the starting point for absolute patterns that
                    start with '/' (but not drive letters or UNC paths
                    on Windows).

                    Note that this *doesn't* necessarily limit the walk to
                    the 'root' directory, and doesn't affect the cwd
                    starting point for non-absolute patterns. A pattern
                    containing '..' will still be able to traverse out of
                    the root directory, if it is not an actual root directory
                    on the filesystem, and any non-absolute patterns will
                    still be matched in the 'cwd'.

                    To start absolute and non-absolute patterns in the same
                    path, you can use '--root=' to set it to the empty
                    string. However, be aware that on Windows systems, a
                    pattern like 'x:/*' or '//host/share/*' will *always*
                    start in the 'x:/' or '//host/share/' directory,
                    regardless of the --root setting.
      `</span>,
    },
    <span class="hljs-attr">platform</span>: {
        <span class="hljs-attr">description</span>: <span class="hljs-string">`Defaults to the value of 'process.platform' if
                    available, or 'linux' if not. Setting --platform=win32
                    on non-Windows systems may cause strange behavior!`</span>,
        <span class="hljs-attr">validate</span>: <span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([
            <span class="hljs-string">'aix'</span>,
            <span class="hljs-string">'android'</span>,
            <span class="hljs-string">'darwin'</span>,
            <span class="hljs-string">'freebsd'</span>,
            <span class="hljs-string">'haiku'</span>,
            <span class="hljs-string">'linux'</span>,
            <span class="hljs-string">'openbsd'</span>,
            <span class="hljs-string">'sunos'</span>,
            <span class="hljs-string">'win32'</span>,
            <span class="hljs-string">'cygwin'</span>,
            <span class="hljs-string">'netbsd'</span>,
        ]).has(v),
    },
})
    .optList({
    <span class="hljs-attr">ignore</span>: {
        <span class="hljs-attr">short</span>: <span class="hljs-string">'i'</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">`Glob patterns to ignore`</span>,
    },
})
    .flag({
    <span class="hljs-attr">debug</span>: {
        <span class="hljs-attr">short</span>: <span class="hljs-string">'v'</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">`Output a huge amount of noisy debug information about
                    patterns as they are parsed and used to match files.`</span>,
    },
})
    .flag({
    <span class="hljs-attr">help</span>: {
        <span class="hljs-attr">short</span>: <span class="hljs-string">'h'</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">'Show this usage information'</span>,
    },
});
<span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> { positionals, values } = j.parse();
    <span class="hljs-keyword">if</span> (values.help) {
        <span class="hljs-built_in">console</span>.log(j.usage());
        process.exit(<span class="hljs-number">0</span>);
    }
    <span class="hljs-keyword">if</span> (positionals.length === <span class="hljs-number">0</span> &amp;&amp; !values.default)
        <span class="hljs-keyword">throw</span> <span class="hljs-string">'No patterns provided'</span>;
    <span class="hljs-keyword">if</span> (positionals.length === <span class="hljs-number">0</span> &amp;&amp; values.default)
        positionals.push(values.default);
    <span class="hljs-keyword">const</span> patterns = values.all
        ? positionals
        : positionals.filter(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> !existsSync(p));
    <span class="hljs-keyword">const</span> matches = values.all
        ? []
        : positionals.filter(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> existsSync(p)).map(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> join(p));
    <span class="hljs-keyword">const</span> stream = globStream(patterns, {
        <span class="hljs-attr">absolute</span>: values.absolute,
        <span class="hljs-attr">cwd</span>: values.cwd,
        <span class="hljs-attr">dot</span>: values.dot,
        <span class="hljs-attr">dotRelative</span>: values[<span class="hljs-string">'dot-relative'</span>],
        <span class="hljs-attr">follow</span>: values.follow,
        <span class="hljs-attr">ignore</span>: values.ignore,
        <span class="hljs-attr">mark</span>: values.mark,
        <span class="hljs-attr">matchBase</span>: values[<span class="hljs-string">'match-base'</span>],
        <span class="hljs-attr">maxDepth</span>: values[<span class="hljs-string">'max-depth'</span>],
        <span class="hljs-attr">nobrace</span>: values.nobrace,
        <span class="hljs-attr">nocase</span>: values.nocase,
        <span class="hljs-attr">nodir</span>: values.nodir,
        <span class="hljs-attr">noext</span>: values.noext,
        <span class="hljs-attr">noglobstar</span>: values.noglobstar,
        <span class="hljs-attr">platform</span>: values.platform,
        <span class="hljs-attr">realpath</span>: values.realpath,
        <span class="hljs-attr">root</span>: values.root,
        <span class="hljs-attr">stat</span>: values.stat,
        <span class="hljs-attr">debug</span>: values.debug,
        <span class="hljs-attr">posix</span>: values.posix,
    });
    <span class="hljs-keyword">const</span> cmd = values.cmd;
    <span class="hljs-keyword">if</span> (!cmd) {
        matches.forEach(<span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(m));
        stream.on(<span class="hljs-string">'data'</span>, f =&gt; <span class="hljs-built_in">console</span>.log(f));
    }
    <span class="hljs-keyword">else</span> {
        stream.on(<span class="hljs-string">'data'</span>, f =&gt; matches.push(f));
        stream.on(<span class="hljs-string">'end'</span>, () =&gt; foregroundChild(cmd, matches, { <span class="hljs-attr">shell</span>: <span class="hljs-literal">true</span> }));
    }
}
<span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-built_in">console</span>.error(j.usage());
    <span class="hljs-built_in">console</span>.error(e <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span> ? e.message : <span class="hljs-built_in">String</span>(e));
    process.exit(<span class="hljs-number">1</span>);
}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="sourcemappingurlbin.mjs.map">
  <h1>
    <a href="#sourcemappingurlbin.mjs.map" name="sourcemappingurlbin.mjs.map" class="pilcrow"></a>
sourceMappingURL=bin.mjs.map
  </h1>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"></pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
